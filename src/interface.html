<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src http://127.0.0.1:5001">
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src http://127.0.0.1:5001">
    <title>CartaMind</title>
    <link rel="stylesheet" href="css/interface.css">
</head>
<body>
    <h1>CartaMind</h1>
    <p>Interact with CartaMind, powered by local LLMs, to get answers about documents or images.</p>

    <div class="container">
        <div class="left-panel">
            <h2>Process File</h2>
            <label for="fileInput">Upload Document</label>
            <input type="file" id="fileInput" name="fileInput" accept=".pdf,.txt,.docx,.jpg,.jpeg,.png,.gif,.bmp" multiple>            
            <div id="fileList" class="file-list">
                <ul id="selectedFilesList"></ul>
            </div>
            <div class="model-selector">
                <label for="embeddingModel">Embedding Model</label>
                <select id="embeddingModel" class="model-select">
                    <!-- Will be populated from models.json -->
                </select>
            </div>
            <div class="model-selector">
                <label for="imageEmbeddingModel">Image Embedding Model</label>
                <select id="imageEmbeddingModel" class="model-select">
                    <!-- Will be populated from models.json -->
                </select>
            </div>
            <!-- Processing Status Box -->
            <div class="status-box">
                <div id="progressBarContainer" class="progress-bar-container">
                    <div id="progressBar" class="progress-bar"></div>
                    <span id="progressText" class="progress-text">Ready. Upload files and click 'Process'.</span>
                </div>
            </div>
            <!-- End Processing Status Box -->
            <button id="processButton">Process Documents</button>
        </div>

        <div class="right-panel">
            <h2>Ask Question</h2>
            <div class="model-selector">
                <label for="queryingModel">Querying Model</label>
                <select id="queryingModel" class="model-select">
                    <!-- Will be populated from models.json -->
                </select>
            </div>
            <label for="queryInput">Ask a Question or Request Summary</label>
            <textarea id="queryInput" rows="3" placeholder="Upload & Process a file first..." disabled></textarea>
            <button id="submitButton" disabled>Submit Query</button>
            <h3>Answer / Summary</h3>
            <textarea id="answerOutput" rows="12" readonly></textarea>
            <div class="button-group">
                <button id="clearButton" disabled>Clear</button>
                <button id="clearAllButton">Clear All</button>
            </div>
        </div>
    </div>

    <script src="js/interface.js"></script>
</body>
</html>